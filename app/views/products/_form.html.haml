.form
  = form_for @product do |f|
    -if @product.errors.any?
      #error_explanation
        %h2= "#{pluralize(@product.errors.count, "error")} prohibited this product from being saved:"
        %ul
          - @product.errors.full_messages.each do |msg|
            %li= msg
    %table
      %tr
        %td
          .label= f.label :title, 'Name'
        %td
          .field= f.text_field :title, { :size => 32 }
      %tr
        %td
          .label= f.label :description, 'Beschreibung'
        %td
          .field= f.text_area :description, {:rows => 10, :cols => 80 }
      %tr
        %td
          .label= f.label :category, 'Kategorie'
        %td
          .field= f.select(:category, Category.all.collect{ |c| [c.title]})
      %tr
        %td
          .label= f.label :list_order, 'Reihenfolge'
        %td
          .field= f.select :list_order, Product::LIST_ORDER_VALUES
      %tr
        %td{ :colspan => '2' }
          Optionen
          = f.fields_for :options do |builder|
            = render 'option_fields', :f => builder
          .css_button=link_to_add_fields "neue Option", f, :options
      %tr
        %td{ :colspan => '2' }      
          Bilder
          .product_images
            - @product.product_images.each_with_index do |image, i|
              .form_image
                .image_number= i+1
                = image_tag image.image(:thumb)
                -if image.title_image?
                  .title_image Titelbild
          = f.fields_for :product_images do |builder|
            = render 'product_image_fields', :f => builder
          .css_button=link_to_add_fields "neues Bild", f, :product_images  
      %tr 
        %td
          .label= f.label :price, 'Preis'
        %td
          .field
            = f.text_field :price, { :size => 6 }
            â‚¬
    .actions
      = f.submit 'Speichern', id: 'save'
